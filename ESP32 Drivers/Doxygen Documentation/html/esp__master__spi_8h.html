<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control of an unstable Bi-Rotor mechanism: esp_master_spi.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control of an unstable Bi-Rotor mechanism<span id="projectnumber">&#160;1.1</span>
   </div>
   <div id="projectbrief">This project is concerned with the closed loop control of an unstable Bi-Rotor mechanism using a</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">esp_master_spi.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &quot;SPI.h&quot;</code><br />
</div>
<p><a href="esp__master__spi_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8a702b5acb140f89c75096dcfdd0d30c"><td class="memItemLeft" align="right" valign="top">SPIClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="esp__master__spi_8h.html#a8a702b5acb140f89c75096dcfdd0d30c">initialize_spi</a> (uint8_t spi_num)</td></tr>
<tr class="memdesc:a8a702b5acb140f89c75096dcfdd0d30c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a method that would initialize the spi itself. We could select the SPI to be VSPI or HSPI. Make sure propper pins are used for each SPI perepheral used.  <a href="esp__master__spi_8h.html#a8a702b5acb140f89c75096dcfdd0d30c">More...</a><br /></td></tr>
<tr class="separator:a8a702b5acb140f89c75096dcfdd0d30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab3158fbdf25232129482cc923063e1"><td class="memItemLeft" align="right" valign="top">SPISettings&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="esp__master__spi_8h.html#afab3158fbdf25232129482cc923063e1">set_spi_settings</a> (uint32_t clkf, uint8_t spi_mode, char first_bit)</td></tr>
<tr class="memdesc:afab3158fbdf25232129482cc923063e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the spi transfer settings. This is used when we want to use the same SPI transfer settings everytime we initiate an SPI transfer command. Instead of having to define the transfer settings everytime, we could define it once and pass this object as a parameter.  <a href="esp__master__spi_8h.html#afab3158fbdf25232129482cc923063e1">More...</a><br /></td></tr>
<tr class="separator:afab3158fbdf25232129482cc923063e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade54bfd9b976272117c38e9fce788ac3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="esp__master__spi_8h.html#ade54bfd9b976272117c38e9fce788ac3">spi_send</a> (SPIClass *spi, uint8_t data, uint32_t clkf, uint8_t spi_mode, char first_bit)</td></tr>
<tr class="memdesc:ade54bfd9b976272117c38e9fce788ac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a funciton that will allow us to Send data over SPI with transfer conditions defined only once for this specific trnasfer operation.  <a href="esp__master__spi_8h.html#ade54bfd9b976272117c38e9fce788ac3">More...</a><br /></td></tr>
<tr class="separator:ade54bfd9b976272117c38e9fce788ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24a6980b5aa1a0cb1fe6804887416e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="esp__master__spi_8h.html#ac24a6980b5aa1a0cb1fe6804887416e9">spi_send</a> (SPIClass *spi, uint8_t data, SPISettings mysettings)</td></tr>
<tr class="memdesc:ac24a6980b5aa1a0cb1fe6804887416e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows us to transfer data through SPI without having to define the transfer settings everytime, we can simply just pass an SPISettings object containing all the settings we want for the transferal.  <a href="esp__master__spi_8h.html#ac24a6980b5aa1a0cb1fe6804887416e9">More...</a><br /></td></tr>
<tr class="separator:ac24a6980b5aa1a0cb1fe6804887416e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3607d99fdcb612780a8ad5e7649538"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="esp__master__spi_8h.html#a3c3607d99fdcb612780a8ad5e7649538">spi_receive</a> (SPIClass *spi, uint32_t clkf, uint8_t spi_mode, char first_bit)</td></tr>
<tr class="memdesc:a3c3607d99fdcb612780a8ad5e7649538"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a function that would allow us to receive a byte from the slave while allowing us to set the SPI settings for that particular transaction.  <a href="esp__master__spi_8h.html#a3c3607d99fdcb612780a8ad5e7649538">More...</a><br /></td></tr>
<tr class="separator:a3c3607d99fdcb612780a8ad5e7649538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a883a2a59fa8ef563200f300b523f4f47"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="esp__master__spi_8h.html#a883a2a59fa8ef563200f300b523f4f47">spi_receive</a> (SPIClass *spi, SPISettings mysettings)</td></tr>
<tr class="memdesc:a883a2a59fa8ef563200f300b523f4f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a function that would allow us to receive a byte from the slave using a preset SPI setting object defined in a SPISettings object.  <a href="esp__master__spi_8h.html#a883a2a59fa8ef563200f300b523f4f47">More...</a><br /></td></tr>
<tr class="separator:a883a2a59fa8ef563200f300b523f4f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Ziad Alwareh </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2022-01-03</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8a702b5acb140f89c75096dcfdd0d30c" name="a8a702b5acb140f89c75096dcfdd0d30c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a702b5acb140f89c75096dcfdd0d30c">&#9670;&#160;</a></span>initialize_spi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPIClass * initialize_spi </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>spi_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a method that would initialize the spi itself. We could select the SPI to be VSPI or HSPI. Make sure propper pins are used for each SPI perepheral used. </p>
<p >For HSPI MOSI --&gt; 13 MISO --&gt; 12 SS --&gt; 15 SCLK --&gt; 14</p>
<p >For VSPI MOSI --&gt; 23 MISO --&gt; 19 SS --&gt; 5 SCLK --&gt; 18</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_num</td><td>This should be either 2 or 3. 2 is for SPI2 (HSPI) and 3 is for SPI3 (VSPI) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SPIClass* </dd></dl>

</div>
</div>
<a id="afab3158fbdf25232129482cc923063e1" name="afab3158fbdf25232129482cc923063e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afab3158fbdf25232129482cc923063e1">&#9670;&#160;</a></span>set_spi_settings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPISettings set_spi_settings </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>clkf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>spi_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>first_bit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the spi transfer settings. This is used when we want to use the same SPI transfer settings everytime we initiate an SPI transfer command. Instead of having to define the transfer settings everytime, we could define it once and pass this object as a parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clkf</td><td>This is the SCLK frequency we want to set for the SPI </td></tr>
    <tr><td class="paramname">spi_mode</td><td>This is the mode of transfer. Could be input as 0,1,2,3. Each mode refers to the clock polarity as well as the phase. For mode details check ATmega328p doccumentation for SPI data modes. </td></tr>
    <tr><td class="paramname">first_bit</td><td>This could be either 'M' indicating Most significant bit first to be transfered, or 'L' for transfering the least significant bit first. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SPISettings object would contain the transfer settings we want to fix for our SPI transfer operations </dd></dl>

</div>
</div>
<a id="ade54bfd9b976272117c38e9fce788ac3" name="ade54bfd9b976272117c38e9fce788ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade54bfd9b976272117c38e9fce788ac3">&#9670;&#160;</a></span>spi_send() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_send </td>
          <td>(</td>
          <td class="paramtype">SPIClass *&#160;</td>
          <td class="paramname"><em>spi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>clkf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>spi_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>first_bit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a funciton that will allow us to Send data over SPI with transfer conditions defined only once for this specific trnasfer operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>: This is the pointer to the SPI class that we have created earlier containing the data of the SPI device we are utilizing. </td></tr>
    <tr><td class="paramname">data</td><td>This is the byte of data we want to send. </td></tr>
    <tr><td class="paramname">clkf</td><td>This is the SCLK frequency. </td></tr>
    <tr><td class="paramname">spi_mode</td><td>This is the mode of transfer. Could be input as 0,1,2,3. Each mode refers to the clock polarity as well as the phase. For mode details check ATmega328p doccumentation for SPI data modes. </td></tr>
    <tr><td class="paramname">first_bit</td><td>This could be either 'M' indicating Most significant bit first to be transfered, or 'L' for transfering the least significant bit first. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac24a6980b5aa1a0cb1fe6804887416e9" name="ac24a6980b5aa1a0cb1fe6804887416e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24a6980b5aa1a0cb1fe6804887416e9">&#9670;&#160;</a></span>spi_send() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_send </td>
          <td>(</td>
          <td class="paramtype">SPIClass *&#160;</td>
          <td class="paramname"><em>spi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPISettings&#160;</td>
          <td class="paramname"><em>mysettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allows us to transfer data through SPI without having to define the transfer settings everytime, we can simply just pass an SPISettings object containing all the settings we want for the transferal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>This is the pointer to the SPI class that we have created earlier containing the data of the SPI device we are utilizing. </td></tr>
    <tr><td class="paramname">data</td><td>This is the byte of data we want to transfer over SPI. </td></tr>
    <tr><td class="paramname">mysettings</td><td>This is the SPISettings object containing the SPI transfer settings. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c3607d99fdcb612780a8ad5e7649538" name="a3c3607d99fdcb612780a8ad5e7649538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c3607d99fdcb612780a8ad5e7649538">&#9670;&#160;</a></span>spi_receive() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t spi_receive </td>
          <td>(</td>
          <td class="paramtype">SPIClass *&#160;</td>
          <td class="paramname"><em>spi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>clkf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>spi_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>first_bit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a function that would allow us to receive a byte from the slave while allowing us to set the SPI settings for that particular transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>: This is the pointer to the SPI class that we have created earlier containing the data of the SPI device we are utilizing. </td></tr>
    <tr><td class="paramname">clkf</td><td>This is the SCLK frequency. </td></tr>
    <tr><td class="paramname">spi_mode</td><td>This is the mode of transfer. Could be input as 0,1,2,3. Each mode refers to the clock polarity as well as the phase. For mode details check ATmega328p doccumentation for SPI data modes. </td></tr>
    <tr><td class="paramname">first_bit</td><td>This could be either 'M' indicating Most significant bit first to be transfered, or 'L' for transfering the least significant bit first. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t, which is the byte received from the slave device. </dd></dl>

</div>
</div>
<a id="a883a2a59fa8ef563200f300b523f4f47" name="a883a2a59fa8ef563200f300b523f4f47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a883a2a59fa8ef563200f300b523f4f47">&#9670;&#160;</a></span>spi_receive() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t spi_receive </td>
          <td>(</td>
          <td class="paramtype">SPIClass *&#160;</td>
          <td class="paramname"><em>spi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPISettings&#160;</td>
          <td class="paramname"><em>mysettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a function that would allow us to receive a byte from the slave using a preset SPI setting object defined in a SPISettings object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>This is the pointer to the SPI class that we have created earlier containing the data of the SPI device we are utilizing. </td></tr>
    <tr><td class="paramname">mysettings</td><td>This is the SPISettings object containing the SPI transfer settings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t, which is the byte received from the slave device. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
