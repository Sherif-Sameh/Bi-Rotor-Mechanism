<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control of an unstable Bi-Rotor mechanism: EKF.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control of an unstable Bi-Rotor mechanism<span id="projectnumber">&#160;1.1</span>
   </div>
   <div id="projectbrief">This project is concerned with the closed loop control of an unstable Bi-Rotor mechanism using a</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">EKF.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Performs the EKF algorithm by combining readings from a 6-axis IMU to provide a good estimate of orientation. This component was added into the system to perform the Extended Kalman Filter (EKF) algorithm based on sensor readings from an IMU where the gyroscopes are used for predicting the state estimates while the accelerometers' readings are used in the correction step to validate the predictions made in the previous step. To keep it as flexible as possible the definitions of the state transition and measurement functions along with their Jacobians was omitted from this file, instead they are defined in a seperate file and passed using pointers to the driver for it to call them during the algorithm.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_m_p_u___basic_8h_source.html">MPU_Basic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_m_p_u___advanced_8h_source.html">MPU_Advanced.h</a>&quot;</code><br />
<code>#include &quot;Functions.h&quot;</code><br />
</div>
<p><a href="_e_k_f_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4ccf1f007be40a8d1c01f62483ef22b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a4ccf1f007be40a8d1c01f62483ef22b3">EKF_SAMPLING_TIME_MS</a>&#160;&#160;&#160;CONFIG_EKF_SAMPLING_TIME_MS</td></tr>
<tr class="separator:a4ccf1f007be40a8d1c01f62483ef22b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9b1c8c5f9868ecb6339454d2074e2c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a1a9b1c8c5f9868ecb6339454d2074e2c">EKF_NUM_OF_STATES</a>&#160;&#160;&#160;CONFIG_EKF_NUM_OF_STATES</td></tr>
<tr class="separator:a1a9b1c8c5f9868ecb6339454d2074e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d117002cef935c85811c57e9a2583d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a9d117002cef935c85811c57e9a2583d1">EKF_NUM_OF_OBSERVATIONS</a>&#160;&#160;&#160;CONFIG_EKF_NUM_OF_OBSERVATIONS</td></tr>
<tr class="separator:a9d117002cef935c85811c57e9a2583d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c15d3c49a03c851c740fd289d5c1a22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a8c15d3c49a03c851c740fd289d5c1a22">EKF_NUM_OF_FLAGS</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a8c15d3c49a03c851c740fd289d5c1a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7d5153e19e9c001ff422a99443ccbe0c"><td class="memItemLeft" align="right" valign="top">typedef void()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a>(const float *, const float *, float *)</td></tr>
<tr class="separator:a7d5153e19e9c001ff422a99443ccbe0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86360f951dd38ea8c6f2812201af2725"><td class="memItemLeft" align="right" valign="top">typedef void()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a>(const float *, float *)</td></tr>
<tr class="separator:a86360f951dd38ea8c6f2812201af2725"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a862c89dfb7b5e4dce3293d820b3b939a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> { <br />
&#160;&#160;<a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aa3a2ca442f2cca86358367347622aa166">EKF_INIT_SUCCESS</a>
, <a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aab624c58dcfa4c006dcb8f5abdbffb1c2">EKF_STF_NOT_DEFINED</a>
, <a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aab93192d2ccd0f80698cdfe179d491790">EKF_MF_NOT_DEFINED</a>
, <a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aa7c2de55a626f12d32149726010616f96">EKF_STF_JACOB_NOT_DEFINED</a>
, <br />
&#160;&#160;<a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aac35270f9f415d209b916cc96e6dfbebd">EKF_MF_JACOB_NOT_DEFINED</a>
, <a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aa1098f413c7aa435085d4a262d4ace109">EKF_PN_COV_NOT_DEFINED</a>
, <a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aa3ead9aa999be2e585dd1075ab18abbbc">EKF_MN_COV_NOT_DEFINED</a>
, <a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939aa3dbfcfe45270a20d2ebb7fa90018f440">EKF_INIT_NOT_CALLED</a>
<br />
 }</td></tr>
<tr class="separator:a862c89dfb7b5e4dce3293d820b3b939a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abba38de7981192b54d9f7abc4be982d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#abba38de7981192b54d9f7abc4be982d8">setStateTransitionFunction</a> (<a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> *STF)</td></tr>
<tr class="memdesc:abba38de7981192b54d9f7abc4be982d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets and stores the pointer to the state transition function.  <a href="_e_k_f_8h.html#abba38de7981192b54d9f7abc4be982d8">More...</a><br /></td></tr>
<tr class="separator:abba38de7981192b54d9f7abc4be982d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1d2bbf665e4e823c6203e722e62e4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a2e1d2bbf665e4e823c6203e722e62e4e">getStateTransitionFunction</a> ()</td></tr>
<tr class="memdesc:a2e1d2bbf665e4e823c6203e722e62e4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the stored pointer to the STF.  <a href="_e_k_f_8h.html#a2e1d2bbf665e4e823c6203e722e62e4e">More...</a><br /></td></tr>
<tr class="separator:a2e1d2bbf665e4e823c6203e722e62e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102099b600c4e3b9fae3c87d2a50b2bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a102099b600c4e3b9fae3c87d2a50b2bf">setMeasurementFunction</a> (<a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> *MF)</td></tr>
<tr class="memdesc:a102099b600c4e3b9fae3c87d2a50b2bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets and stores the pointer to the measurment function.  <a href="_e_k_f_8h.html#a102099b600c4e3b9fae3c87d2a50b2bf">More...</a><br /></td></tr>
<tr class="separator:a102099b600c4e3b9fae3c87d2a50b2bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac697b2aa6c598bfb09f63f6ed74072df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#ac697b2aa6c598bfb09f63f6ed74072df">getMeasurementFunction</a> ()</td></tr>
<tr class="memdesc:ac697b2aa6c598bfb09f63f6ed74072df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the stored pointer to the MF.  <a href="_e_k_f_8h.html#ac697b2aa6c598bfb09f63f6ed74072df">More...</a><br /></td></tr>
<tr class="separator:ac697b2aa6c598bfb09f63f6ed74072df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6641653b21cd3a246097c05a3878f8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#ae6641653b21cd3a246097c05a3878f8a">setStateTransitionFunctionJacob</a> (<a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> *STF_Jacob)</td></tr>
<tr class="memdesc:ae6641653b21cd3a246097c05a3878f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets and stores the pointer to the Jacobian of the STF.  <a href="_e_k_f_8h.html#ae6641653b21cd3a246097c05a3878f8a">More...</a><br /></td></tr>
<tr class="separator:ae6641653b21cd3a246097c05a3878f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aac8c94f7d15e8b19d99b3948c068f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a9aac8c94f7d15e8b19d99b3948c068f8">getStateTransitionFunctionJacob</a> ()</td></tr>
<tr class="memdesc:a9aac8c94f7d15e8b19d99b3948c068f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the stored pointer to the Jacobian of the STF.  <a href="_e_k_f_8h.html#a9aac8c94f7d15e8b19d99b3948c068f8">More...</a><br /></td></tr>
<tr class="separator:a9aac8c94f7d15e8b19d99b3948c068f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac32a3967c9206939197b1453744b58ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#ac32a3967c9206939197b1453744b58ce">setMeasurementFunctionJacob</a> (<a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> *MF_Jacob)</td></tr>
<tr class="memdesc:ac32a3967c9206939197b1453744b58ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets and stores the pointer to the Jacobian of the MF.  <a href="_e_k_f_8h.html#ac32a3967c9206939197b1453744b58ce">More...</a><br /></td></tr>
<tr class="separator:ac32a3967c9206939197b1453744b58ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f2aaac9c041dfc85ab3d209d60c962"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a03f2aaac9c041dfc85ab3d209d60c962">getMeasurementFunctionJacob</a> ()</td></tr>
<tr class="memdesc:a03f2aaac9c041dfc85ab3d209d60c962"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the stored pointer to the Jacobian of the MF.  <a href="_e_k_f_8h.html#a03f2aaac9c041dfc85ab3d209d60c962">More...</a><br /></td></tr>
<tr class="separator:a03f2aaac9c041dfc85ab3d209d60c962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30dfc0b28f7d8d1ec13f2b370ef9435d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a30dfc0b28f7d8d1ec13f2b370ef9435d">setProcessNoiseCov</a> (float *PNCov)</td></tr>
<tr class="memdesc:a30dfc0b28f7d8d1ec13f2b370ef9435d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets and stores the value of the Process Noise Covariance.  <a href="_e_k_f_8h.html#a30dfc0b28f7d8d1ec13f2b370ef9435d">More...</a><br /></td></tr>
<tr class="separator:a30dfc0b28f7d8d1ec13f2b370ef9435d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f5d2b7721883360e39db904d467ca5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a3f5d2b7721883360e39db904d467ca5f">getProcessNoiseCov</a> (float *PNCov)</td></tr>
<tr class="memdesc:a3f5d2b7721883360e39db904d467ca5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will copy the value of the PN covariance matrix into the array given.  <a href="_e_k_f_8h.html#a3f5d2b7721883360e39db904d467ca5f">More...</a><br /></td></tr>
<tr class="separator:a3f5d2b7721883360e39db904d467ca5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29fb84ce5a81b649664345e66b32fcd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a29fb84ce5a81b649664345e66b32fcd5">setMeasurementNoiseCov</a> (float *MNCov)</td></tr>
<tr class="memdesc:a29fb84ce5a81b649664345e66b32fcd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Measurement Noise Covariance.  <a href="_e_k_f_8h.html#a29fb84ce5a81b649664345e66b32fcd5">More...</a><br /></td></tr>
<tr class="separator:a29fb84ce5a81b649664345e66b32fcd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07561e8046e1e00d68d589c933859f7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a07561e8046e1e00d68d589c933859f7f">getMeasurementNoiseCov</a> (float *MNCov)</td></tr>
<tr class="memdesc:a07561e8046e1e00d68d589c933859f7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will copy the value of the MN covariance matrix into the array given.  <a href="_e_k_f_8h.html#a07561e8046e1e00d68d589c933859f7f">More...</a><br /></td></tr>
<tr class="separator:a07561e8046e1e00d68d589c933859f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f564093037b528e8109e11b0af26f90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a9f564093037b528e8109e11b0af26f90">setInitialValues</a> (float *initialStateVector, float *initialErrorCov)</td></tr>
<tr class="memdesc:a9f564093037b528e8109e11b0af26f90"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to set the initial state vector and error covariance matrix for the EKF.  <a href="_e_k_f_8h.html#a9f564093037b528e8109e11b0af26f90">More...</a><br /></td></tr>
<tr class="separator:a9f564093037b528e8109e11b0af26f90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ed6ff2240901e726b75264ca705a903"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a9ed6ff2240901e726b75264ca705a903">kalmanPredictionStep</a> (float *gyroReadings)</td></tr>
<tr class="memdesc:a9ed6ff2240901e726b75264ca705a903"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the prediction step only of the EKF.  <a href="_e_k_f_8h.html#a9ed6ff2240901e726b75264ca705a903">More...</a><br /></td></tr>
<tr class="separator:a9ed6ff2240901e726b75264ca705a903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48faa3d86f521fd4b3130069df43b49d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#a48faa3d86f521fd4b3130069df43b49d">getUpdatedStateEstimate</a> (float *updatedStateVector)</td></tr>
<tr class="memdesc:a48faa3d86f521fd4b3130069df43b49d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs a full iteration of the EKF to calculate the updated state vector estimate.  <a href="_e_k_f_8h.html#a48faa3d86f521fd4b3130069df43b49d">More...</a><br /></td></tr>
<tr class="separator:a48faa3d86f521fd4b3130069df43b49d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae39408732bb3a3b6a04a62f7cc96b089"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_k_f_8h.html#ae39408732bb3a3b6a04a62f7cc96b089">kalmanCorrectionStep</a> (float *accReadings)</td></tr>
<tr class="memdesc:ae39408732bb3a3b6a04a62f7cc96b089"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the correction step only of the EKF.  <a href="_e_k_f_8h.html#ae39408732bb3a3b6a04a62f7cc96b089">More...</a><br /></td></tr>
<tr class="separator:ae39408732bb3a3b6a04a62f7cc96b089"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Performs the EKF algorithm by combining readings from a 6-axis IMU to provide a good estimate of orientation. This component was added into the system to perform the Extended Kalman Filter (EKF) algorithm based on sensor readings from an IMU where the gyroscopes are used for predicting the state estimates while the accelerometers' readings are used in the correction step to validate the predictions made in the previous step. To keep it as flexible as possible the definitions of the state transition and measurement functions along with their Jacobians was omitted from this file, instead they are defined in a seperate file and passed using pointers to the driver for it to call them during the algorithm. </p>
<dl class="section author"><dt>Author</dt><dd>Sherif Sameh </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-01-02</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4ccf1f007be40a8d1c01f62483ef22b3" name="a4ccf1f007be40a8d1c01f62483ef22b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ccf1f007be40a8d1c01f62483ef22b3">&#9670;&#160;</a></span>EKF_SAMPLING_TIME_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EKF_SAMPLING_TIME_MS&#160;&#160;&#160;CONFIG_EKF_SAMPLING_TIME_MS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This parameter is used to set the sampling rate that is used during the calculation of the EKF but does in way enforce that sampling rate, that is left to the application to ensure that this rate is followed. Set through the menuconfig. </p>

</div>
</div>
<a id="a1a9b1c8c5f9868ecb6339454d2074e2c" name="a1a9b1c8c5f9868ecb6339454d2074e2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a9b1c8c5f9868ecb6339454d2074e2c">&#9670;&#160;</a></span>EKF_NUM_OF_STATES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EKF_NUM_OF_STATES&#160;&#160;&#160;CONFIG_EKF_NUM_OF_STATES</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This parameter describes the number of states that are estimated through the EKF. Set through the menuconfig. </p>

</div>
</div>
<a id="a9d117002cef935c85811c57e9a2583d1" name="a9d117002cef935c85811c57e9a2583d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d117002cef935c85811c57e9a2583d1">&#9670;&#160;</a></span>EKF_NUM_OF_OBSERVATIONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EKF_NUM_OF_OBSERVATIONS&#160;&#160;&#160;CONFIG_EKF_NUM_OF_OBSERVATIONS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This parameter describes the number of available observations to the EKF that it will use to correct the predictions of the model. </p>

</div>
</div>
<a id="a8c15d3c49a03c851c740fd289d5c1a22" name="a8c15d3c49a03c851c740fd289d5c1a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c15d3c49a03c851c740fd289d5c1a22">&#9670;&#160;</a></span>EKF_NUM_OF_FLAGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EKF_NUM_OF_FLAGS&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This parameter represents the number of flags that must be set before declaring that the EKF has been initialized successfully and the algorithm can begin. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a7d5153e19e9c001ff422a99443ccbe0c" name="a7d5153e19e9c001ff422a99443ccbe0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d5153e19e9c001ff422a99443ccbe0c">&#9670;&#160;</a></span>nonLinearFunc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nonLinearFunc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Alias for defining a function that does not return anything and takes 3 pointers to float arrays as input. </p>

</div>
</div>
<a id="a86360f951dd38ea8c6f2812201af2725" name="a86360f951dd38ea8c6f2812201af2725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86360f951dd38ea8c6f2812201af2725">&#9670;&#160;</a></span>nonLinearFunc2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nonLinearFunc2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Alias for defining a function that does not return anything and takes 2 pointers to float arrays as input. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a862c89dfb7b5e4dce3293d820b3b939a" name="a862c89dfb7b5e4dce3293d820b3b939a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a862c89dfb7b5e4dce3293d820b3b939a">&#9670;&#160;</a></span>EKF_STATUS_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This enum is used to describe the current status of the EKF and is used as a checklist of processes that should be done to initialize the EKF before starting the algorithm. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aa3a2ca442f2cca86358367347622aa166" name="a862c89dfb7b5e4dce3293d820b3b939aa3a2ca442f2cca86358367347622aa166"></a>EKF_INIT_SUCCESS&#160;</td><td class="fielddoc"><p >The EKF has been fully initialized succesfully </p>
</td></tr>
<tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aab624c58dcfa4c006dcb8f5abdbffb1c2" name="a862c89dfb7b5e4dce3293d820b3b939aab624c58dcfa4c006dcb8f5abdbffb1c2"></a>EKF_STF_NOT_DEFINED&#160;</td><td class="fielddoc"><p >The state transition function (STF) is not set </p>
</td></tr>
<tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aab93192d2ccd0f80698cdfe179d491790" name="a862c89dfb7b5e4dce3293d820b3b939aab93192d2ccd0f80698cdfe179d491790"></a>EKF_MF_NOT_DEFINED&#160;</td><td class="fielddoc"><p >The measurement function (MF) is not set </p>
</td></tr>
<tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aa7c2de55a626f12d32149726010616f96" name="a862c89dfb7b5e4dce3293d820b3b939aa7c2de55a626f12d32149726010616f96"></a>EKF_STF_JACOB_NOT_DEFINED&#160;</td><td class="fielddoc"><p >The Jacobian of the STF has is not set </p>
</td></tr>
<tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aac35270f9f415d209b916cc96e6dfbebd" name="a862c89dfb7b5e4dce3293d820b3b939aac35270f9f415d209b916cc96e6dfbebd"></a>EKF_MF_JACOB_NOT_DEFINED&#160;</td><td class="fielddoc"><p >The Jacobian of the MF has is not set </p>
</td></tr>
<tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aa1098f413c7aa435085d4a262d4ace109" name="a862c89dfb7b5e4dce3293d820b3b939aa1098f413c7aa435085d4a262d4ace109"></a>EKF_PN_COV_NOT_DEFINED&#160;</td><td class="fielddoc"><p >The process noise covariance has not been set </p>
</td></tr>
<tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aa3ead9aa999be2e585dd1075ab18abbbc" name="a862c89dfb7b5e4dce3293d820b3b939aa3ead9aa999be2e585dd1075ab18abbbc"></a>EKF_MN_COV_NOT_DEFINED&#160;</td><td class="fielddoc"><p >The measurement noise covariance has not been set </p>
</td></tr>
<tr><td class="fieldname"><a id="a862c89dfb7b5e4dce3293d820b3b939aa3dbfcfe45270a20d2ebb7fa90018f440" name="a862c89dfb7b5e4dce3293d820b3b939aa3dbfcfe45270a20d2ebb7fa90018f440"></a>EKF_INIT_NOT_CALLED&#160;</td><td class="fielddoc"><p >The initial states and error covariance have not been set </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abba38de7981192b54d9f7abc4be982d8" name="abba38de7981192b54d9f7abc4be982d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abba38de7981192b54d9f7abc4be982d8">&#9670;&#160;</a></span>setStateTransitionFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> setStateTransitionFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> *&#160;</td>
          <td class="paramname"><em>STF</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets and stores the pointer to the state transition function. </p>
<p >&lt; Setters and getters for the parameters of the EKF. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">STF</td><td>A function pointer that points to the STF. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EKF_STATUS_t Will not return EKF_STF_NOT_DEFINED if successful. </dd></dl>

</div>
</div>
<a id="a2e1d2bbf665e4e823c6203e722e62e4e" name="a2e1d2bbf665e4e823c6203e722e62e4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e1d2bbf665e4e823c6203e722e62e4e">&#9670;&#160;</a></span>getStateTransitionFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> * getStateTransitionFunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the stored pointer to the STF. </p>
<dl class="section return"><dt>Returns</dt><dd>nonLinearFunc* Pointer to the STF, equals NULL if the STF has not been defined. </dd></dl>

</div>
</div>
<a id="a102099b600c4e3b9fae3c87d2a50b2bf" name="a102099b600c4e3b9fae3c87d2a50b2bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102099b600c4e3b9fae3c87d2a50b2bf">&#9670;&#160;</a></span>setMeasurementFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> setMeasurementFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> *&#160;</td>
          <td class="paramname"><em>MF</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets and stores the pointer to the measurment function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MF</td><td>A function pointer that points to the MF. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EKF_STATUS_t Will not return EKF_MF_NOT_DEFINED if successful. </dd></dl>

</div>
</div>
<a id="ac697b2aa6c598bfb09f63f6ed74072df" name="ac697b2aa6c598bfb09f63f6ed74072df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac697b2aa6c598bfb09f63f6ed74072df">&#9670;&#160;</a></span>getMeasurementFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> * getMeasurementFunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the stored pointer to the MF. </p>
<dl class="section return"><dt>Returns</dt><dd>nonLinearFunc2* Pointer to the MF, equals NULL if the MF has not been defined. </dd></dl>

</div>
</div>
<a id="ae6641653b21cd3a246097c05a3878f8a" name="ae6641653b21cd3a246097c05a3878f8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6641653b21cd3a246097c05a3878f8a">&#9670;&#160;</a></span>setStateTransitionFunctionJacob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> setStateTransitionFunctionJacob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> *&#160;</td>
          <td class="paramname"><em>STF_Jacob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets and stores the pointer to the Jacobian of the STF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">STF_Jacob</td><td>A function pointer that points to the Jacobian of the STF. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EKF_STATUS_t Will not return EKF_STF_JACOB_NOT_DEFINED if successful. </dd></dl>

</div>
</div>
<a id="a9aac8c94f7d15e8b19d99b3948c068f8" name="a9aac8c94f7d15e8b19d99b3948c068f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aac8c94f7d15e8b19d99b3948c068f8">&#9670;&#160;</a></span>getStateTransitionFunctionJacob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a7d5153e19e9c001ff422a99443ccbe0c">nonLinearFunc</a> * getStateTransitionFunctionJacob </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the stored pointer to the Jacobian of the STF. </p>
<dl class="section return"><dt>Returns</dt><dd>nonLinearFunc* Pointer to the Jacobian of the STF, equals NULL if the Jacobian has not been defined. </dd></dl>

</div>
</div>
<a id="ac32a3967c9206939197b1453744b58ce" name="ac32a3967c9206939197b1453744b58ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac32a3967c9206939197b1453744b58ce">&#9670;&#160;</a></span>setMeasurementFunctionJacob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> setMeasurementFunctionJacob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> *&#160;</td>
          <td class="paramname"><em>MF_Jacob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets and stores the pointer to the Jacobian of the MF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MF_Jacob</td><td>A function pointer that points to the Jacobian of the MF. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EKF_STATUS_t Will not return EKF_MF_JACOB_NOT_DEFINED if successful. </dd></dl>

</div>
</div>
<a id="a03f2aaac9c041dfc85ab3d209d60c962" name="a03f2aaac9c041dfc85ab3d209d60c962"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03f2aaac9c041dfc85ab3d209d60c962">&#9670;&#160;</a></span>getMeasurementFunctionJacob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a86360f951dd38ea8c6f2812201af2725">nonLinearFunc2</a> * getMeasurementFunctionJacob </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the stored pointer to the Jacobian of the MF. </p>
<dl class="section return"><dt>Returns</dt><dd>nonLinearFunc2* Pointer to the Jacobian of the MF, equals NULL if the Jacobian has not been defined. </dd></dl>

</div>
</div>
<a id="a30dfc0b28f7d8d1ec13f2b370ef9435d" name="a30dfc0b28f7d8d1ec13f2b370ef9435d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30dfc0b28f7d8d1ec13f2b370ef9435d">&#9670;&#160;</a></span>setProcessNoiseCov()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> setProcessNoiseCov </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>PNCov</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets and stores the value of the Process Noise Covariance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PNCov</td><td>A pointer to an array of floats that represents the process noise covariance matrix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EKF_STATUS_t Will not return EKF_PN_COV_NOT_DEFINED if successful. </dd></dl>

</div>
</div>
<a id="a3f5d2b7721883360e39db904d467ca5f" name="a3f5d2b7721883360e39db904d467ca5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f5d2b7721883360e39db904d467ca5f">&#9670;&#160;</a></span>getProcessNoiseCov()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getProcessNoiseCov </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>PNCov</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will copy the value of the PN covariance matrix into the array given. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PNCov</td><td>A pointer to the array that the PN covariance will be copied into. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a29fb84ce5a81b649664345e66b32fcd5" name="a29fb84ce5a81b649664345e66b32fcd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29fb84ce5a81b649664345e66b32fcd5">&#9670;&#160;</a></span>setMeasurementNoiseCov()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> setMeasurementNoiseCov </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>MNCov</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the Measurement Noise Covariance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MNCov</td><td>A pointer to an array of floats that represents the measurement noise covariance matrix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EKF_STATUS_t Will not return EKF_MN_COV_NOT_DEFINED if successful. </dd></dl>

</div>
</div>
<a id="a07561e8046e1e00d68d589c933859f7f" name="a07561e8046e1e00d68d589c933859f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07561e8046e1e00d68d589c933859f7f">&#9670;&#160;</a></span>getMeasurementNoiseCov()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getMeasurementNoiseCov </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>MNCov</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will copy the value of the MN covariance matrix into the array given. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MNCov</td><td>A pointer to the array that the MN covariance will be copied into. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f564093037b528e8109e11b0af26f90" name="a9f564093037b528e8109e11b0af26f90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f564093037b528e8109e11b0af26f90">&#9670;&#160;</a></span>setInitialValues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_e_k_f_8h.html#a862c89dfb7b5e4dce3293d820b3b939a">EKF_STATUS_t</a> setInitialValues </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>initialStateVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>initialErrorCov</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is used to set the initial state vector and error covariance matrix for the EKF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initialStateVector</td><td>A pointer to the start of the initial state vector. </td></tr>
    <tr><td class="paramname">initialErrorCov</td><td>A pointer to the start of the initial error covariance matrix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EKF_STATUS_t Will not return EKF_INIT_NOT_CALLED if successful. Functions responsible for executing the EKF algorithm. </dd></dl>

</div>
</div>
<a id="a9ed6ff2240901e726b75264ca705a903" name="a9ed6ff2240901e726b75264ca705a903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ed6ff2240901e726b75264ca705a903">&#9670;&#160;</a></span>kalmanPredictionStep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kalmanPredictionStep </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>gyroReadings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the prediction step only of the EKF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gyroReadings</td><td>The scaled gyroscope readings in rad/s. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a48faa3d86f521fd4b3130069df43b49d" name="a48faa3d86f521fd4b3130069df43b49d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48faa3d86f521fd4b3130069df43b49d">&#9670;&#160;</a></span>getUpdatedStateEstimate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getUpdatedStateEstimate </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>updatedStateVector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs a full iteration of the EKF to calculate the updated state vector estimate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">updatedStateVector</td><td>A pointer to an array of floats that will store the updated state vector estimate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae39408732bb3a3b6a04a62f7cc96b089" name="ae39408732bb3a3b6a04a62f7cc96b089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae39408732bb3a3b6a04a62f7cc96b089">&#9670;&#160;</a></span>kalmanCorrectionStep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kalmanCorrectionStep </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>accReadings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the correction step only of the EKF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accReadings</td><td>The scaled accelerometer readings in m/s^2. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
