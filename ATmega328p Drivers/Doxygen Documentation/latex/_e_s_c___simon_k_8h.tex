\hypertarget{_e_s_c___simon_k_8h}{}\doxysection{ESC\+\_\+\+Simon\+K.\+h File Reference}
\label{_e_s_c___simon_k_8h}\index{ESC\_SimonK.h@{ESC\_SimonK.h}}


A driver for controlling the SimonK brushless motor ESC.  


{\ttfamily \#include \char`\"{}MCAL\+\_\+\+TIMER2.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{_e_s_c___simon_k_8h_ad1fed6b984fe13e37907bd567c02f116}{ESC\+\_\+\+SIMONK\+\_\+\+PWM\+\_\+\+FREQ\+\_\+\+HZ}}~250
\item 
\#define \mbox{\hyperlink{_e_s_c___simon_k_8h_ad42eea862493af58cf7e23b132d9cdd7}{ESC\+\_\+\+SIMONK\+\_\+\+MAX\+\_\+\+PULSE\+\_\+\+WIDTH\+\_\+\+MS}}~((float) 2)
\item 
\#define \mbox{\hyperlink{_e_s_c___simon_k_8h_aaec45d53d833a531a9c954349247489b}{ESC\+\_\+\+SIMONK\+\_\+\+MIN\+\_\+\+PULSE\+\_\+\+WIDTH\+\_\+\+MS}}~((float) 1)
\item 
\#define \mbox{\hyperlink{_e_s_c___simon_k_8h_a30a4972d2d661d8da4b431266a558098}{ESC\+\_\+\+SIMONK\+\_\+\+MAX\+\_\+\+VOLTAGE}}~((float) 12)
\item 
\#define \mbox{\hyperlink{_e_s_c___simon_k_8h_aeb2f2f473cb953e195783d5758f85506}{ESC\+\_\+\+SIMONK\+\_\+\+WORKING\+\_\+\+MODE}}~\mbox{\hyperlink{_m_c_a_l___t_i_m_e_r2_8h_aa6735fb77ede76d6ac5c82c5308e67d5a3b0bd64c380ea6271d695ab846d6415f}{TIMER2\+\_\+\+PWM\+\_\+\+NON\+\_\+\+INVERTED}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_e_s_c___simon_k_8h_a2ff888baa018f73d3e45208e7d22962b}{init\+ESC\+\_\+\+SimonK}} ()
\begin{DoxyCompactList}\small\item\em Initializes the underlying timer according to the desired settings as well as calculating all the neccessary parameters for the ESCs normal operation. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_e_s_c___simon_k_8h_a26645307bd8315fecb03fada00e2794f}{set\+Duty\+Cycle\+SimonK}} (float voltage)
\begin{DoxyCompactList}\small\item\em Sets the Duty Cycle for the ESC by converting the voltage into a duty cycle then communicating with the timer to set that duty cycle. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A driver for controlling the SimonK brushless motor ESC. 

\begin{DoxyAuthor}{Author}
Sherif Sameh 
\end{DoxyAuthor}
\begin{DoxyAttention}{Attention}
In its current configuration, this driver is bound to Timer 2 of the ATmega 
\end{DoxyAttention}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2023-\/01-\/02
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2023 
\end{DoxyCopyright}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{_e_s_c___simon_k_8h_ad1fed6b984fe13e37907bd567c02f116}\label{_e_s_c___simon_k_8h_ad1fed6b984fe13e37907bd567c02f116}} 
\index{ESC\_SimonK.h@{ESC\_SimonK.h}!ESC\_SIMONK\_PWM\_FREQ\_HZ@{ESC\_SIMONK\_PWM\_FREQ\_HZ}}
\index{ESC\_SIMONK\_PWM\_FREQ\_HZ@{ESC\_SIMONK\_PWM\_FREQ\_HZ}!ESC\_SimonK.h@{ESC\_SimonK.h}}
\doxysubsubsection{\texorpdfstring{ESC\_SIMONK\_PWM\_FREQ\_HZ}{ESC\_SIMONK\_PWM\_FREQ\_HZ}}
{\footnotesize\ttfamily \#define ESC\+\_\+\+SIMONK\+\_\+\+PWM\+\_\+\+FREQ\+\_\+\+HZ~250}

This macro is used to set the frequency of the PWM signal in Hz. Note\+: This value is fixed and cannot be changed during runtime because the ESCs have to be recalibrated in order to work with a different frequency so it would not have made sense to make it a variable. \mbox{\Hypertarget{_e_s_c___simon_k_8h_ad42eea862493af58cf7e23b132d9cdd7}\label{_e_s_c___simon_k_8h_ad42eea862493af58cf7e23b132d9cdd7}} 
\index{ESC\_SimonK.h@{ESC\_SimonK.h}!ESC\_SIMONK\_MAX\_PULSE\_WIDTH\_MS@{ESC\_SIMONK\_MAX\_PULSE\_WIDTH\_MS}}
\index{ESC\_SIMONK\_MAX\_PULSE\_WIDTH\_MS@{ESC\_SIMONK\_MAX\_PULSE\_WIDTH\_MS}!ESC\_SimonK.h@{ESC\_SimonK.h}}
\doxysubsubsection{\texorpdfstring{ESC\_SIMONK\_MAX\_PULSE\_WIDTH\_MS}{ESC\_SIMONK\_MAX\_PULSE\_WIDTH\_MS}}
{\footnotesize\ttfamily \#define ESC\+\_\+\+SIMONK\+\_\+\+MAX\+\_\+\+PULSE\+\_\+\+WIDTH\+\_\+\+MS~((float) 2)}

This macros sets the maximum pulse width in ms that corresponds to 100\% duty cycle as specefied by the manufacturer of the ESC. \mbox{\Hypertarget{_e_s_c___simon_k_8h_aaec45d53d833a531a9c954349247489b}\label{_e_s_c___simon_k_8h_aaec45d53d833a531a9c954349247489b}} 
\index{ESC\_SimonK.h@{ESC\_SimonK.h}!ESC\_SIMONK\_MIN\_PULSE\_WIDTH\_MS@{ESC\_SIMONK\_MIN\_PULSE\_WIDTH\_MS}}
\index{ESC\_SIMONK\_MIN\_PULSE\_WIDTH\_MS@{ESC\_SIMONK\_MIN\_PULSE\_WIDTH\_MS}!ESC\_SimonK.h@{ESC\_SimonK.h}}
\doxysubsubsection{\texorpdfstring{ESC\_SIMONK\_MIN\_PULSE\_WIDTH\_MS}{ESC\_SIMONK\_MIN\_PULSE\_WIDTH\_MS}}
{\footnotesize\ttfamily \#define ESC\+\_\+\+SIMONK\+\_\+\+MIN\+\_\+\+PULSE\+\_\+\+WIDTH\+\_\+\+MS~((float) 1)}

This macros sets the minimum pulse width in ms that corresponds to 0\% duty cycle as specefied by the manufacturer of the ESC. \mbox{\Hypertarget{_e_s_c___simon_k_8h_a30a4972d2d661d8da4b431266a558098}\label{_e_s_c___simon_k_8h_a30a4972d2d661d8da4b431266a558098}} 
\index{ESC\_SimonK.h@{ESC\_SimonK.h}!ESC\_SIMONK\_MAX\_VOLTAGE@{ESC\_SIMONK\_MAX\_VOLTAGE}}
\index{ESC\_SIMONK\_MAX\_VOLTAGE@{ESC\_SIMONK\_MAX\_VOLTAGE}!ESC\_SimonK.h@{ESC\_SimonK.h}}
\doxysubsubsection{\texorpdfstring{ESC\_SIMONK\_MAX\_VOLTAGE}{ESC\_SIMONK\_MAX\_VOLTAGE}}
{\footnotesize\ttfamily \#define ESC\+\_\+\+SIMONK\+\_\+\+MAX\+\_\+\+VOLTAGE~((float) 12)}

This macro sets the maximum voltage that is available to the motors and is used in order to calculate the required pulse width depending on the desired voltage level. \mbox{\Hypertarget{_e_s_c___simon_k_8h_aeb2f2f473cb953e195783d5758f85506}\label{_e_s_c___simon_k_8h_aeb2f2f473cb953e195783d5758f85506}} 
\index{ESC\_SimonK.h@{ESC\_SimonK.h}!ESC\_SIMONK\_WORKING\_MODE@{ESC\_SIMONK\_WORKING\_MODE}}
\index{ESC\_SIMONK\_WORKING\_MODE@{ESC\_SIMONK\_WORKING\_MODE}!ESC\_SimonK.h@{ESC\_SimonK.h}}
\doxysubsubsection{\texorpdfstring{ESC\_SIMONK\_WORKING\_MODE}{ESC\_SIMONK\_WORKING\_MODE}}
{\footnotesize\ttfamily \#define ESC\+\_\+\+SIMONK\+\_\+\+WORKING\+\_\+\+MODE~\mbox{\hyperlink{_m_c_a_l___t_i_m_e_r2_8h_aa6735fb77ede76d6ac5c82c5308e67d5a3b0bd64c380ea6271d695ab846d6415f}{TIMER2\+\_\+\+PWM\+\_\+\+NON\+\_\+\+INVERTED}}}

This macro is used to choose between inverted and non-\/inverted COMs for the underlying timer. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{_m_c_a_l___t_i_m_e_r2_8h_aa6735fb77ede76d6ac5c82c5308e67d5}{TIMER2\+\_\+\+PWM\+\_\+\+COM}} 
\end{DoxySeeAlso}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_e_s_c___simon_k_8h_a2ff888baa018f73d3e45208e7d22962b}\label{_e_s_c___simon_k_8h_a2ff888baa018f73d3e45208e7d22962b}} 
\index{ESC\_SimonK.h@{ESC\_SimonK.h}!initESC\_SimonK@{initESC\_SimonK}}
\index{initESC\_SimonK@{initESC\_SimonK}!ESC\_SimonK.h@{ESC\_SimonK.h}}
\doxysubsubsection{\texorpdfstring{initESC\_SimonK()}{initESC\_SimonK()}}
{\footnotesize\ttfamily void init\+ESC\+\_\+\+SimonK (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initializes the underlying timer according to the desired settings as well as calculating all the neccessary parameters for the ESCs normal operation. 


\begin{DoxyParams}{Parameters}
{\em } & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{_e_s_c___simon_k_8h_a26645307bd8315fecb03fada00e2794f}\label{_e_s_c___simon_k_8h_a26645307bd8315fecb03fada00e2794f}} 
\index{ESC\_SimonK.h@{ESC\_SimonK.h}!setDutyCycleSimonK@{setDutyCycleSimonK}}
\index{setDutyCycleSimonK@{setDutyCycleSimonK}!ESC\_SimonK.h@{ESC\_SimonK.h}}
\doxysubsubsection{\texorpdfstring{setDutyCycleSimonK()}{setDutyCycleSimonK()}}
{\footnotesize\ttfamily void set\+Duty\+Cycle\+SimonK (\begin{DoxyParamCaption}\item[{float}]{voltage }\end{DoxyParamCaption})}



Sets the Duty Cycle for the ESC by converting the voltage into a duty cycle then communicating with the timer to set that duty cycle. 


\begin{DoxyParams}{Parameters}
{\em voltage} & The desired voltage to be applied to the motors. Ranges from 0 to the max defined voltage. \\
\hline
\end{DoxyParams}
