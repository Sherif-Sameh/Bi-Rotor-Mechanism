<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control of an unstable Bi-Rotor mechanism: MCAL_TIMER0.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control of an unstable Bi-Rotor mechanism<span id="projectnumber">&#160;1.1</span>
   </div>
   <div id="projectbrief">This project is concerned with the closed loop control of an unstable Bi-Rotor mechanism using a</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">MCAL_TIMER0.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>For Confiuring Timer 0 in Phase Correct PWM mode. This driver is responsible for configuring Timer 0 of the ATMega32 to work in phase correct PWM mode with the specified frequecy as well as controlling the duty cycle of the PWM signal.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br />
</div>
<p><a href="_m_c_a_l___t_i_m_e_r0_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a38a9b3e78388211e30a03cd7d08412c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a38a9b3e78388211e30a03cd7d08412c0">CPU_CLK_FREQ_HZ</a>&#160;&#160;&#160;((uint32_t) 16000000)</td></tr>
<tr class="separator:a38a9b3e78388211e30a03cd7d08412c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d7b13f4c74a35915c3b12db00044b22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a3d7b13f4c74a35915c3b12db00044b22">OCR0B_PIN</a>&#160;&#160;&#160;PD5</td></tr>
<tr class="separator:a3d7b13f4c74a35915c3b12db00044b22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aeb68fba131d4942f364c23c139bdd90a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90a">TIMER0_PRESCALAR</a> { <br />
&#160;&#160;<a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90aaa8f10b9d19f84be929e71d5745d7df94">TIMER0_N_1</a> = 1
, <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90aa74530bb77f964b5659565f7097aad125">TIMER0_N_8</a> = 2
, <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90aa177c34839d5c580468695c4000eef5f1">TIMER0_N_64</a> = 3
, <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90aaed3521d1355a3b03e7b7fc0cd9ff2963">TIMER0_N_256</a> = 4
, <br />
&#160;&#160;<a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90aab0cf5294993a41c96b5e0f09226d36cb">TIMER0_N_1024</a> = 5
<br />
 }</td></tr>
<tr class="memdesc:aeb68fba131d4942f364c23c139bdd90a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum used to abstract the register values needed for each prescalar value.  <a href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90a">More...</a><br /></td></tr>
<tr class="separator:aeb68fba131d4942f364c23c139bdd90a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b4b7d0920f27bbf728bee44f99f898"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898">TIMER0_PWM_COM</a> { <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898a4eed843e41a19f3668ab813a11e677c2">TIMER0_PWM_NON_INVERTED</a>
, <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898adb7eae3b53ece8ce58361496d8929552">TIMER0_PWM_INVERTED</a>
 }</td></tr>
<tr class="memdesc:a43b4b7d0920f27bbf728bee44f99f898"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum used for choosing the PWM's compare output mode (COM).  <a href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898">More...</a><br /></td></tr>
<tr class="separator:a43b4b7d0920f27bbf728bee44f99f898"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acb13dab4e1034c454c4675821fc86f73"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#acb13dab4e1034c454c4675821fc86f73">getOCRATimer0</a> ()</td></tr>
<tr class="memdesc:acb13dab4e1034c454c4675821fc86f73"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function to return the value of OCRA.  <a href="_m_c_a_l___t_i_m_e_r0_8h.html#acb13dab4e1034c454c4675821fc86f73">More...</a><br /></td></tr>
<tr class="separator:acb13dab4e1034c454c4675821fc86f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adef1df877a18d61b27474d6f5f64b2d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#adef1df877a18d61b27474d6f5f64b2d6">initTimer0</a> (uint32_t pwmFrequencyHz, <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898">TIMER0_PWM_COM</a> workingMode)</td></tr>
<tr class="memdesc:adef1df877a18d61b27474d6f5f64b2d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Timer 0 in Phase Correct PWM Mode. This function will configures all the relevant uC registers in order to initialize the timer in PC PWM mode with the desired frequency and working mode.  <a href="_m_c_a_l___t_i_m_e_r0_8h.html#adef1df877a18d61b27474d6f5f64b2d6">More...</a><br /></td></tr>
<tr class="separator:adef1df877a18d61b27474d6f5f64b2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaffb260762a79ec020b95581e1f465eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aaffb260762a79ec020b95581e1f465eb">disableTimer0</a> ()</td></tr>
<tr class="memdesc:aaffb260762a79ec020b95581e1f465eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables Timer 0. This function will reset all relevant uC registers in order to totally disable the timer's operation.  <a href="_m_c_a_l___t_i_m_e_r0_8h.html#aaffb260762a79ec020b95581e1f465eb">More...</a><br /></td></tr>
<tr class="separator:aaffb260762a79ec020b95581e1f465eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07bee7f84d9ff71e9d090faa61a216ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a07bee7f84d9ff71e9d090faa61a216ab">setDutyCycleTimer0</a> (float dutyCycle)</td></tr>
<tr class="memdesc:a07bee7f84d9ff71e9d090faa61a216ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Duty Cycle of Timer 0. This function will calculate the needed values for the OC register in order to get the desired duty cycle at the current frequency and COM.  <a href="_m_c_a_l___t_i_m_e_r0_8h.html#a07bee7f84d9ff71e9d090faa61a216ab">More...</a><br /></td></tr>
<tr class="separator:a07bee7f84d9ff71e9d090faa61a216ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >For Confiuring Timer 0 in Phase Correct PWM mode. This driver is responsible for configuring Timer 0 of the ATMega32 to work in phase correct PWM mode with the specified frequecy as well as controlling the duty cycle of the PWM signal. </p>
<dl class="section author"><dt>Author</dt><dd>Sherif Sameh </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-01-01</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a38a9b3e78388211e30a03cd7d08412c0" name="a38a9b3e78388211e30a03cd7d08412c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38a9b3e78388211e30a03cd7d08412c0">&#9670;&#160;</a></span>CPU_CLK_FREQ_HZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPU_CLK_FREQ_HZ&#160;&#160;&#160;((uint32_t) 16000000)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This macro is used to define the CPU's operating clock frequeny in Hz as to have the ability to automatically adjust the values needed in the Output compare registers in order to generate the PWM signal at the desired frequency. </p>

</div>
</div>
<a id="a3d7b13f4c74a35915c3b12db00044b22" name="a3d7b13f4c74a35915c3b12db00044b22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d7b13f4c74a35915c3b12db00044b22">&#9670;&#160;</a></span>OCR0B_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OCR0B_PIN&#160;&#160;&#160;PD5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This macro defines the pin that the PWM signal is output to in order to be able to configure it as an output during the initialization process. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aeb68fba131d4942f364c23c139bdd90a" name="aeb68fba131d4942f364c23c139bdd90a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb68fba131d4942f364c23c139bdd90a">&#9670;&#160;</a></span>TIMER0_PRESCALAR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#aeb68fba131d4942f364c23c139bdd90a">TIMER0_PRESCALAR</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enum used to abstract the register values needed for each prescalar value. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aeb68fba131d4942f364c23c139bdd90aaa8f10b9d19f84be929e71d5745d7df94" name="aeb68fba131d4942f364c23c139bdd90aaa8f10b9d19f84be929e71d5745d7df94"></a>TIMER0_N_1&#160;</td><td class="fielddoc"><p >Prescalar = 1 </p>
</td></tr>
<tr><td class="fieldname"><a id="aeb68fba131d4942f364c23c139bdd90aa74530bb77f964b5659565f7097aad125" name="aeb68fba131d4942f364c23c139bdd90aa74530bb77f964b5659565f7097aad125"></a>TIMER0_N_8&#160;</td><td class="fielddoc"><p >Prescalar = 8 </p>
</td></tr>
<tr><td class="fieldname"><a id="aeb68fba131d4942f364c23c139bdd90aa177c34839d5c580468695c4000eef5f1" name="aeb68fba131d4942f364c23c139bdd90aa177c34839d5c580468695c4000eef5f1"></a>TIMER0_N_64&#160;</td><td class="fielddoc"><p >Prescalar = 64 </p>
</td></tr>
<tr><td class="fieldname"><a id="aeb68fba131d4942f364c23c139bdd90aaed3521d1355a3b03e7b7fc0cd9ff2963" name="aeb68fba131d4942f364c23c139bdd90aaed3521d1355a3b03e7b7fc0cd9ff2963"></a>TIMER0_N_256&#160;</td><td class="fielddoc"><p >Prescalar = 256 </p>
</td></tr>
<tr><td class="fieldname"><a id="aeb68fba131d4942f364c23c139bdd90aab0cf5294993a41c96b5e0f09226d36cb" name="aeb68fba131d4942f364c23c139bdd90aab0cf5294993a41c96b5e0f09226d36cb"></a>TIMER0_N_1024&#160;</td><td class="fielddoc"><p >Prescalar = 1024 </p>
</td></tr>
</table>

</div>
</div>
<a id="a43b4b7d0920f27bbf728bee44f99f898" name="a43b4b7d0920f27bbf728bee44f99f898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43b4b7d0920f27bbf728bee44f99f898">&#9670;&#160;</a></span>TIMER0_PWM_COM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898">TIMER0_PWM_COM</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enum used for choosing the PWM's compare output mode (COM). </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a43b4b7d0920f27bbf728bee44f99f898a4eed843e41a19f3668ab813a11e677c2" name="a43b4b7d0920f27bbf728bee44f99f898a4eed843e41a19f3668ab813a11e677c2"></a>TIMER0_PWM_NON_INVERTED&#160;</td><td class="fielddoc"><p >COM = Non Inverted </p>
</td></tr>
<tr><td class="fieldname"><a id="a43b4b7d0920f27bbf728bee44f99f898adb7eae3b53ece8ce58361496d8929552" name="a43b4b7d0920f27bbf728bee44f99f898adb7eae3b53ece8ce58361496d8929552"></a>TIMER0_PWM_INVERTED&#160;</td><td class="fielddoc"><p >COM = Inverted </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acb13dab4e1034c454c4675821fc86f73" name="acb13dab4e1034c454c4675821fc86f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb13dab4e1034c454c4675821fc86f73">&#9670;&#160;</a></span>getOCRATimer0()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t getOCRATimer0 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function to return the value of OCRA. </p>
<dl class="section return"><dt>Returns</dt><dd>uint8_t Return the values stored in register OCR0A (sets the frequency of the PWM signal). </dd></dl>

</div>
</div>
<a id="adef1df877a18d61b27474d6f5f64b2d6" name="adef1df877a18d61b27474d6f5f64b2d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adef1df877a18d61b27474d6f5f64b2d6">&#9670;&#160;</a></span>initTimer0()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initTimer0 </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pwmFrequencyHz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898">TIMER0_PWM_COM</a>&#160;</td>
          <td class="paramname"><em>workingMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Timer 0 in Phase Correct PWM Mode. This function will configures all the relevant uC registers in order to initialize the timer in PC PWM mode with the desired frequency and working mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pwmFrequencyHz</td><td>The desired PWM frequency in Hz. </td></tr>
    <tr><td class="paramname">workingMode</td><td>The working mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_m_c_a_l___t_i_m_e_r0_8h.html#a43b4b7d0920f27bbf728bee44f99f898" title="Enum used for choosing the PWM&#39;s compare output mode (COM).">TIMER0_PWM_COM</a> </dd></dl>
<p >&lt; Frequencies less than this are impossible to achieve</p>

</div>
</div>
<a id="aaffb260762a79ec020b95581e1f465eb" name="aaffb260762a79ec020b95581e1f465eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaffb260762a79ec020b95581e1f465eb">&#9670;&#160;</a></span>disableTimer0()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disableTimer0 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables Timer 0. This function will reset all relevant uC registers in order to totally disable the timer's operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07bee7f84d9ff71e9d090faa61a216ab" name="a07bee7f84d9ff71e9d090faa61a216ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07bee7f84d9ff71e9d090faa61a216ab">&#9670;&#160;</a></span>setDutyCycleTimer0()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setDutyCycleTimer0 </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>dutyCycle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the Duty Cycle of Timer 0. This function will calculate the needed values for the OC register in order to get the desired duty cycle at the current frequency and COM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dutyCycle</td><td>The desired duty cycle. Acceptable values range from 0.0 to 100.0 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
